<!doctype html>
<html lang="ko">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>ì—„ê°€ë„¤ í˜„ì¥ ê³„ì‚°ê¸°</title>

<style>
*{box-sizing:border-box}
:root{
  --bg:#0b0b0b;
  --panel:#151515;
  --tile:#1b1b1b;
  --line:#2a2a2a;
  --orange:#ff8c00;
  --good:#3bd66f;
  --danger:#ff3b30;
  --text:#ffffff;
  --muted:rgba(255,255,255,.75);
}

body{
  margin:0;
  background:var(--bg);
  color:var(--text);
  font-family:system-ui,-apple-system,sans-serif;
  height:100vh;
  overflow:hidden; /* âœ… í˜ì´ì§€ ìŠ¤í¬ë¡¤ ê¸ˆì§€ */
}

header{
  background:var(--orange);
  padding:14px 12px;
  font-size:22px;
  font-weight:900;
  text-align:center;
}

main{
  height:calc(100vh - 64px);
  padding:12px;
  display:grid;
  grid-template-columns: 3fr 1.55fr; /* âœ… ìš°ì¸¡ì„ ì¢€ ë” â€œ3/1 ëŠë‚Œâ€ */
  gap:12px;
  overflow:hidden;
}

/* ===== ì¢Œì¸¡(ìƒí’ˆ) ===== */
.left{
  min-height:0;
  display:flex;
  flex-direction:column;
  gap:10px;
}

/* ìƒë‹¨: ì¹´í…Œê³ ë¦¬ + ê²€ìƒ‰ */
.topbar{
  display:grid;
  grid-template-columns: 1fr 260px;
  gap:10px;
  align-items:center;
}
.cat-bar{
  display:flex;
  gap:8px;
  flex-wrap:wrap;
}
.cat-btn{
  background:#222;
  color:#fff;
  border:1px solid #3a3a3a;
  border-radius:10px;
  padding:10px 14px;
  font-size:16px;
  font-weight:800;
  cursor:pointer;
}
.cat-btn.active{
  background:var(--orange);
  color:#000;
  border-color:transparent;
}

.search{
  width:100%;
  padding:12px 12px;
  border-radius:10px;
  border:1px solid #3a3a3a;
  background:#101010;
  color:#fff;
  font-size:16px;
  outline:none;
}
.search::placeholder{ color:rgba(255,255,255,.45); }

/* ìì£¼ì“°ëŠ” í’ˆëª© */
.pins{
  background:var(--panel);
  border:1px solid #111;
  border-radius:12px;
  padding:10px;
}
.pins-title{
  font-weight:900;
  font-size:16px;
  margin-bottom:8px;
  opacity:.95;
}
.pins-grid{
  display:grid;
  grid-template-columns: repeat(5, 1fr);
  gap:8px;
}
.pin-tile{
  background:var(--tile);
  border:1px solid #101010;
  border-radius:12px;
  padding:10px;
  cursor:pointer;
  display:flex;
  flex-direction:column;
  gap:6px;
  min-height:64px;
}
.pin-name{ font-size:15px; font-weight:900; line-height:1.1; }
.pin-sub{ font-size:12px; color:var(--muted); display:flex; justify-content:space-between; }
.pin-sub b{ color:#fff; }

/* ìƒí’ˆ íƒ€ì¼ */
.items{
  flex:1;
  min-height:0;
  overflow:auto;
  padding-right:4px;
}
.items-grid{
  display:grid;
  grid-template-columns: repeat(5, 1fr); /* âœ… PC 5ì—´ */
  gap:10px;
}
.item-tile{
  background:var(--tile);
  border:1px solid #101010;
  border-radius:14px;
  padding:14px 12px;
  cursor:pointer;
  min-height:86px;
  display:flex;
  flex-direction:column;
  justify-content:space-between;
}
.item-name{
  font-size:18px;
  font-weight:900;
  line-height:1.15;
}
.item-meta{
  display:flex;
  justify-content:space-between;
  align-items:center;
  color:var(--muted);
  font-size:13px;
}
.item-meta b{ color:#fff; font-size:14px; }

/* ===== ìš°ì¸¡(ê²°ì œ) ===== */
.right{
  min-height:0;
  display:flex;
  flex-direction:column;
  gap:10px;
}

.pay-panel{
  background:var(--panel);
  border:1px solid #111;
  border-radius:14px;
  padding:12px;
  min-height:0;
  display:flex;
  flex-direction:column;
  gap:10px;
}

.total{
  font-size:30px;
  font-weight:1000;
  letter-spacing:.2px;
}

.cart{
  flex:1;
  min-height:0;
  overflow:auto; /* âœ… ì¥ë°”êµ¬ë‹ˆë§Œ ìŠ¤í¬ë¡¤ */
  border-radius:12px;
  border:1px solid #101010;
  background:#111;
}

.cart-row{
  display:grid;
  grid-template-columns: 1fr auto auto;
  gap:10px;
  align-items:center;
  padding:12px 10px;
  border-bottom:1px solid var(--line);
}
.cart-row:last-child{ border-bottom:none; }

.cart-name{
  font-size:15px;
  font-weight:900;
}
.cart-sub{
  margin-top:4px;
  font-size:12px;
  color:var(--muted);
}

.qty{
  display:flex;
  gap:8px;
  align-items:center;
}
.qty button{
  width:38px;
  height:34px;
  border-radius:10px;
  border:1px solid #3a3a3a;
  background:#1a1a1a;
  color:#fff;
  font-size:18px;
  font-weight:900;
  cursor:pointer;
}
.qty span{
  min-width:34px;
  text-align:center;
  font-size:16px;
  font-weight:1000;
}
.line-price{
  display:flex;
  align-items:center;
  gap:10px;
}
.line-price b{
  white-space:nowrap;
  font-size:14px;
  opacity:.95;
}
.trash{
  width:40px;
  height:34px;
  border-radius:10px;
  border:none;
  background:var(--danger);
  color:#fff;
  font-size:16px;
  cursor:pointer;
}

.paidline{
  display:flex;
  justify-content:space-between;
  gap:12px;
  font-size:18px;      /* âœ… ë‹¤ì‹œ í¬ê²Œ */
  font-weight:900;
  padding:6px 2px 0;
}
.paidline span{ font-weight:1000; }

/* âœ… í•˜ë‹¨ ê²°ì œ ì˜ì—­ ê³ ì • + ë²„íŠ¼ í¬ê¸°/ê°„ê²© í†µì¼ */
.footer{
  position:sticky;
  bottom:0;
  background:var(--panel);
  border-top:1px solid #111;
  padding-top:10px;
  border-radius:0 0 14px 14px;
}

.money{
  display:grid;
  grid-template-columns: repeat(3, 1fr);
  gap:10px; /* âœ… ê°„ê²© í†µì¼ */
}
.money button{
  height:52px;         /* âœ… ë²„íŠ¼ ë†’ì´ ê³ ì • */
  border-radius:12px;
  border:1px solid #2a2a2a;
  background:#f3f3f3;
  color:#000;
  font-size:18px;
  font-weight:1000;
  cursor:pointer;
}
.money .reset{
  background:var(--danger);
  color:#fff;
  border:none;
}
.pay{
  width:100%;
  height:62px;         /* âœ… ê²°ì œì™„ë£Œ í¬ê²Œ */
  margin-top:10px;
  border-radius:14px;
  border:none;
  background:var(--good);
  color:#000;
  font-size:22px;
  font-weight:1000;
  cursor:pointer;
}

/* ===== ë°˜ì‘í˜•(íƒœë¸”ë¦¿/ëª¨ë°”ì¼) ===== */
@media (max-width: 1200px){
  main{ grid-template-columns: 1fr 1fr; }
  .items-grid{ grid-template-columns: repeat(4, 1fr); } /* íƒœë¸”ë¦¿ 4ì—´ */
  .pins-grid{ grid-template-columns: repeat(4, 1fr); }
  .topbar{ grid-template-columns: 1fr 220px; }
}
@media (max-width: 900px){
  body{ overflow:auto; }
  main{ grid-template-columns: 1fr; height:auto; overflow:visible; }
  .items{ overflow:visible; }
  .cart{ max-height:320px; }
  .items-grid{ grid-template-columns: repeat(3, 1fr); } /* í° 3ì—´ */
  .pins-grid{ grid-template-columns: repeat(3, 1fr); }
  .topbar{ grid-template-columns: 1fr; }
}
</style>
</head>

<body>
<header>ì—„ê°€ë„¤ í˜„ì¥ ê³„ì‚°ê¸°</header>

<main>
  <!-- ì¢Œì¸¡ -->
  <section class="left">
    <div class="topbar">
      <div class="cat-bar" id="cats"></div>
      <input id="search" class="search" placeholder="ê²€ìƒ‰: ã„±ë§Œ ì³ë„ ë‚˜ì˜´ (ì˜ˆ: ê³ êµ¬ë§ˆ)" />
    </div>

    <div class="pins">
      <div class="pins-title">ìì£¼ì“°ëŠ” í’ˆëª©</div>
      <div class="pins-grid" id="pins"></div>
    </div>

    <div class="items" id="items">
      <div class="items-grid" id="itemsGrid"></div>
    </div>
  </section>

  <!-- ìš°ì¸¡ -->
  <section class="right">
    <div class="pay-panel">
      <div class="total">ì´í•©ê³„ â‚©<span id="total">0</span></div>

      <div class="cart" id="cart"></div>

      <div class="paidline">
        <div>ë°›ì€ëˆ â‚©<span id="paid">0</span></div>
        <div>ê±°ìŠ¤ë¦„ â‚©<span id="change">0</span></div>
      </div>

      <div class="footer">
        <div class="money">
          <button onclick="addMoney(1000)">1ì²œ</button>
          <button onclick="addMoney(5000)">5ì²œ</button>
          <button onclick="addMoney(10000)">1ë§Œ</button>
          <button onclick="addMoney(30000)">3ë§Œ</button>
          <button onclick="addMoney(50000)">5ë§Œ</button>
          <button class="reset" onclick="resetAll()">ì´ˆê¸°í™”</button>
        </div>
        <button class="pay" onclick="complete()">ê²°ì œ ì™„ë£Œ</button>
      </div>
    </div>
  </section>
</main>

<!-- âœ… items.js: window.ITEMS = [{cat,name,unit,price, pin:true/false}] -->
<script src="items.js"></script>

<script>
/* =========================
   ìƒíƒœ
   ========================= */
let cart = [];   // [{key,name,unit,price,qty}]
let total = 0;
let paid  = 0;

let currentCat = "ê³¼ì¼";
let query = "";

/* =========================
   ì—˜ë¦¬ë¨¼íŠ¸
   ========================= */
const catsEl = document.getElementById("cats");
const pinsEl = document.getElementById("pins");
const itemsGridEl = document.getElementById("itemsGrid");
const cartEl = document.getElementById("cart");
const searchEl = document.getElementById("search");

/* =========================
   ì¤€ë¹„
   ========================= */
const ITEMS = window.ITEMS || [];
const cats = [...new Set(ITEMS.map(i=>i.cat))];
if(cats.length && !cats.includes(currentCat)) currentCat = cats[0];

function keyOf(i){ return `${i.name}||${i.unit}||${i.price}`; }

searchEl.addEventListener("input", (e)=>{
  query = (e.target.value || "").trim();
  renderItems();
});

/* =========================
   ë Œë”: ì¹´í…Œê³ ë¦¬
   ========================= */
function renderCats(){
  catsEl.innerHTML = "";
  cats.forEach(c=>{
    const b = document.createElement("button");
    b.className = "cat-btn" + (c===currentCat ? " active": "");
    b.textContent = c;
    b.onclick = ()=>{
      currentCat = c;
      renderCats();
      renderItems();
    };
    catsEl.appendChild(b);
  });
}

/* =========================
   ë Œë”: ìì£¼ì“°ëŠ”(í•€)
   items.jsì—ì„œ pin:true ì£¼ë©´ ìë™ í‘œì‹œ
   ========================= */
function renderPins(){
  pinsEl.innerHTML = "";
  const pinned = ITEMS.filter(i=>i.pin===true).slice(0, 15); // ë„ˆë¬´ ë§ìœ¼ë©´ 15ê°œê¹Œì§€ë§Œ
  if(pinned.length===0){
    pinsEl.innerHTML = `<div style="color:rgba(255,255,255,.6);font-size:13px;padding:8px;">items.jsì—ì„œ pin:true ì§€ì •í•˜ë©´ ì—¬ê¸°ì— ëœ¸</div>`;
    return;
  }
  pinned.forEach(i=>{
    const d = document.createElement("div");
    d.className = "pin-tile";
    d.innerHTML = `
      <div class="pin-name">${i.name}</div>
      <div class="pin-sub"><span>${i.unit}</span><b>â‚©${i.price.toLocaleString()}</b></div>
    `;
    d.onclick = ()=> addItem(i);
    pinsEl.appendChild(d);
  });
}

/* =========================
   ë Œë”: ìƒí’ˆ íƒ€ì¼(4~5ì—´)
   - ì¹´í…Œê³ ë¦¬ + ê²€ìƒ‰(ì´ˆì„±/ë¶€ë¶„) í•„í„°
   ========================= */
function matchesQuery(i, q){
  if(!q) return true;
  // ë‹¨ìˆœ ë¶€ë¶„ê²€ìƒ‰: "ã„±"ì´ë©´ ì´ë¦„ì— "ã„±" í¬í•¨ë˜ëŠ” ì• ë“¤ë§Œ
  // (ì´ˆì„± ì™„ì „ë§¤ì¹­ê¹Œì§€ëŠ” ë‹¤ìŒ ë‹¨ê³„ì—ì„œ ê³ ë„í™” ê°€ëŠ¥)
  return i.name.includes(q);
}

function renderItems(){
  itemsGridEl.innerHTML = "";

  const list = ITEMS
    .filter(i=>i.cat===currentCat)
    .filter(i=>matchesQuery(i, query));

  list.forEach(i=>{
    const d = document.createElement("div");
    d.className = "item-tile";
    d.innerHTML = `
      <div class="item-name">${i.name}</div>
      <div class="item-meta"><span>${i.unit}</span><b>â‚©${i.price.toLocaleString()}</b></div>
    `;
    d.onclick = ()=> addItem(i);
    itemsGridEl.appendChild(d);
  });
}

/* =========================
   ì¥ë°”êµ¬ë‹ˆ(ìˆ˜ëŸ‰)
   ========================= */
function addItem(i){
  const key = keyOf(i);
  const found = cart.find(x=>x.key===key);
  if(found) found.qty += 1;
  else cart.push({ key, name:i.name, unit:i.unit, price:i.price, qty:1 });

  recalc();
  renderCart();
}

function inc(idx){
  cart[idx].qty += 1;
  recalc();
  renderCart();
}
function dec(idx){
  cart[idx].qty -= 1;
  if(cart[idx].qty<=0) cart.splice(idx,1);
  recalc();
  renderCart();
}
function delLine(idx){
  cart.splice(idx,1);
  recalc();
  renderCart();
}

function recalc(){
  total = cart.reduce((s,x)=> s + x.price*x.qty, 0);
  document.getElementById("total").textContent = total.toLocaleString();
  updateChange();
}

function renderCart(){
  cartEl.innerHTML = "";
  cart.forEach((x, idx)=>{
    const row = document.createElement("div");
    row.className="cart-row";
    row.innerHTML = `
      <div>
        <div class="cart-name">${x.name} x${x.qty}</div>
        <div class="cart-sub">(${x.unit})</div>
      </div>

      <div class="qty">
        <button onclick="dec(${idx})">âˆ’</button>
        <span>${x.qty}</span>
        <button onclick="inc(${idx})">+</button>
      </div>

      <div class="line-price">
        <b>â‚©${(x.price*x.qty).toLocaleString()}</b>
        <button class="trash" onclick="delLine(${idx})">ğŸ—‘</button>
      </div>
    `;
    cartEl.appendChild(row);
  });

  // ë¹ˆ ì¥ë°”êµ¬ë‹ˆ ì•ˆë‚´
  if(cart.length===0){
    cartEl.innerHTML = `<div style="padding:16px;color:rgba(255,255,255,.6);font-weight:800;">ì™¼ìª½ì—ì„œ í’ˆëª©ì„ ëˆŒëŸ¬ ë‹´ìœ¼ì„¸ìš”</div>`;
  }
}

/* =========================
   ê²°ì œ
   ========================= */
function addMoney(a){
  paid += a;
  document.getElementById("paid").textContent = paid.toLocaleString();
  updateChange();
}
function updateChange(){
  document.getElementById("change").textContent = Math.max(paid-total,0).toLocaleString();
}
function resetAll(){
  cart = [];
  total = 0;
  paid = 0;
  document.getElementById("total").textContent = "0";
  document.getElementById("paid").textContent = "0";
  document.getElementById("change").textContent = "0";
  renderCart();
}
function complete(){
  alert("ê²°ì œ ì™„ë£Œ");
  resetAll();
}

/* =========================
   ì‹œì‘
   ========================= */
renderCats();
renderPins();
renderItems();
renderCart();
</script>
</body>
</html>
