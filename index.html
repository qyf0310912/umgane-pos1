<!doctype html>
<html lang="ko">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>ì—„ê°€ë„¤ í˜„ì¥ POS</title>

<style>
  :root{
    --bg:#0e0e0e;
    --panel:#141414;
    --panel2:#1c1c1c;
    --line:#2a2a2a;
    --accent:#ff7a00;
    --good:#3ddb6f;
    --bad:#ff3b30;
    --text:#ffffff;
    --muted:#bdbdbd;
  }

  body{
    margin:0;
    font-family: system-ui, -apple-system, sans-serif;
    background:var(--bg);
    color:var(--text);
  }

  header{
    background:var(--accent);
    padding:14px;
    font-size:22px;
    font-weight:900;
    text-align:center;
  }

  .wrap{ padding:12px; }

  /* âœ… PC: ì¢Œ 2/3, ìš° 1/3 */
  .layout{
    display:grid;
    grid-template-columns: 2fr 1fr;
    gap:12px;
    align-items:start;
  }

  /* âœ… ëª¨ë°”ì¼/íƒœë¸”ë¦¿: ì„¸ë¡œë¡œ */
  @media (max-width: 900px){
    .layout{ grid-template-columns:1fr; }
  }

  .card{
    background:var(--panel);
    border:1px solid var(--line);
    border-radius:12px;
    overflow:hidden;
  }

  .card-title{
    padding:10px 12px;
    font-weight:900;
    border-bottom:1px solid var(--line);
    background:#101010;
  }

  /* ì™¼ìª½: ì¹´í…Œê³ ë¦¬/í’ˆëª© */
  .cats{
    display:flex;
    gap:8px;
    padding:10px 12px;
    flex-wrap:wrap;
    border-bottom:1px solid var(--line);
    background:#101010;
  }
  .cat-btn{
    background:#2b2b2b;
    color:#fff;
    font-size:18px;
    padding:10px 14px;
    border-radius:10px;
    border:1px solid #3a3a3a;
    cursor:pointer;
  }
  .cat-btn.active{
    outline:2px solid var(--accent);
  }

  .items{
    padding:10px 12px;
    display:flex;
    flex-direction:column;
    gap:10px;
  }
  .item-btn{
    width:100%;
    background:#1f1f1f;
    border:1px solid #333;
    color:#fff;
    font-size:22px;
    padding:16px 14px;
    border-radius:12px;
    cursor:pointer;
    display:flex;
    justify-content:space-between;
    align-items:center;
  }
  .item-btn .right{
    color:#fff;
    font-weight:900;
  }
  .item-btn .left{
    color:#fff;
  }
  .item-btn small{
    color:var(--muted);
    font-size:14px;
    margin-left:8px;
  }

  /* ì˜¤ë¥¸ìª½: ê²°ì œ */
  .paybox{ padding:12px; }

  .total{
    font-size:30px;
    font-weight:900;
    margin-bottom:10px;
  }

  .cart{
    background:var(--panel2);
    border:1px solid var(--line);
    border-radius:12px;
    padding:10px;
    min-height:140px;
  }

  .cart-empty{
    color:var(--muted);
    font-size:16px;
    padding:10px;
  }

  .cart-item{
    display:flex;
    justify-content:space-between;
    align-items:center;
    gap:10px;
    padding:10px 8px;
    border-bottom:1px solid #2a2a2a;
    font-size:18px;
  }
  .cart-item:last-child{ border-bottom:none; }

  .trash{
    background:var(--bad);
    color:#fff;
    border:none;
    border-radius:10px;
    padding:8px 10px;
    font-size:18px;
    cursor:pointer;
    margin-left:8px;
  }

  .money-row{
    display:flex;
    justify-content:space-between;
    font-size:20px;
    margin-top:10px;
    padding:8px 2px;
  }

  .money-grid{
    display:grid;
    grid-template-columns: repeat(3, 1fr);
    gap:10px;
    margin-top:10px;
  }
  .m-btn{
    padding:16px 10px;
    font-size:20px;
    border-radius:12px;
    border:1px solid #3a3a3a;
    background:#f1f1f1;
    color:#111;
    cursor:pointer;
    font-weight:800;
  }
  .m-btn.reset{
    background:var(--bad);
    color:#fff;
    border:none;
  }

  .pay-btn{
    width:100%;
    padding:18px;
    font-size:26px;
    font-weight:900;
    background:var(--good);
    border:none;
    border-radius:12px;
    margin-top:12px;
    cursor:pointer;
  }
</style>
</head>

<body>
<header>ì—„ê°€ë„¤ í˜„ì¥ ê³„ì‚°ê¸°</header>

<div class="wrap">
  <div class="layout">
    <!-- âœ… ì™¼ìª½(2/3): ì¹´í…Œê³ ë¦¬ + í’ˆëª© -->
    <div class="card">
      <div class="card-title">í’ˆëª© ì„ íƒ</div>
      <div class="cats" id="categories"></div>
      <div class="items" id="items"></div>
    </div>

    <!-- âœ… ì˜¤ë¥¸ìª½(1/3): ê²°ì œ/ì¥ë°”êµ¬ë‹ˆ -->
    <div class="card">
      <div class="card-title">ê²°ì œ</div>
      <div class="paybox">
        <div class="total">ì´í•©ê³„ â‚©<span id="total">0</span></div>

        <div class="cart" id="cart">
          <div class="cart-empty">ì¥ë°”êµ¬ë‹ˆ ë¹„ì–´ìˆìŒ (ì™¼ìª½ì—ì„œ í’ˆëª© ëˆ„ë¥´ë©´ ë‹´ê¹€)</div>
        </div>

        <div class="money-row">
          <div>ë°›ì€ëˆ â‚©<span id="paid">0</span></div>
          <div>ê±°ìŠ¤ë¦„ â‚©<span id="change">0</span></div>
        </div>

        <div class="money-grid">
          <button class="m-btn" onclick="addMoney(1000)">1ì²œ</button>
          <button class="m-btn" onclick="addMoney(5000)">5ì²œ</button>
          <button class="m-btn" onclick="addMoney(10000)">1ë§Œ</button>
          <button class="m-btn" onclick="addMoney(30000)">3ë§Œ</button>
          <button class="m-btn" onclick="addMoney(50000)">5ë§Œ</button>
          <button class="m-btn reset" onclick="resetAll()">ì´ˆê¸°í™”</button>
        </div>

        <button class="pay-btn" onclick="complete()">ê²°ì œ ì™„ë£Œ</button>
      </div>
    </div>
  </div>
</div>

<!-- âœ… í’ˆëª© ë°ì´í„° -->
<script src="items.js"></script>

<script>
let total = 0;
let paid = 0;
let cartItems = [];
let currentCat = null;

function renderCategories(){
  const cats = [...new Set((window.ITEMS||[]).map(i => i.cat))];
  const box = document.getElementById("categories");
  box.innerHTML = "";

  cats.forEach((c, idx) => {
    const b = document.createElement("button");
    b.className = "cat-btn";
    b.innerText = c;
    b.onclick = () => {
      currentCat = c;
      document.querySelectorAll(".cat-btn").forEach(x => x.classList.remove("active"));
      b.classList.add("active");
      renderItems(c);
    };
    box.appendChild(b);

    if(idx === 0 && !currentCat){
      currentCat = c;
      b.classList.add("active");
    }
  });

  if(currentCat) renderItems(currentCat);
}

function renderItems(cat){
  const box = document.getElementById("items");
  box.innerHTML = "";
  (window.ITEMS||[]).filter(i => i.cat === cat).forEach(item => {
    const b = document.createElement("button");
    b.className = "item-btn";
    b.innerHTML = `
      <span class="left">${item.name} <small>(${item.unit})</small></span>
      <span class="right">â‚©${Number(item.price).toLocaleString()}</span>
    `;
    b.onclick = () => addItem(item);
    box.appendChild(b);
  });
}

function addItem(item){
  cartItems.push(item);
  total += Number(item.price);
  document.getElementById("total").innerText = total.toLocaleString();
  renderCart();
  refreshChange();
}

function renderCart(){
  const box = document.getElementById("cart");
  box.innerHTML = "";

  if(cartItems.length === 0){
    box.innerHTML = `<div class="cart-empty">ì¥ë°”êµ¬ë‹ˆ ë¹„ì–´ìˆìŒ (ì™¼ìª½ì—ì„œ í’ˆëª© ëˆ„ë¥´ë©´ ë‹´ê¹€)</div>`;
    return;
  }

  cartItems.forEach((i, idx) => {
    const row = document.createElement("div");
    row.className = "cart-item";
    row.innerHTML = `
      <span>${i.name} ${i.unit}</span>
      <span>
        â‚©${Number(i.price).toLocaleString()}
        <button class="trash" onclick="removeItem(${idx})">ğŸ—‘ï¸</button>
      </span>
    `;
    box.appendChild(row);
  });
}

function removeItem(idx){
  total -= Number(cartItems[idx].price);
  cartItems.splice(idx,1);
  document.getElementById("total").innerText = total.toLocaleString();
  renderCart();
  refreshChange();
}

function addMoney(amount){
  paid += amount;
  document.getElementById("paid").innerText = paid.toLocaleString();
  refreshChange();
}

function refreshChange(){
  document.getElementById("change").innerText = Math.max(paid - total, 0).toLocaleString();
}

function resetAll(){
  total = 0;
  paid = 0;
  cartItems = [];
  document.getElementById("total").innerText = "0";
  document.getElementById("paid").innerText = "0";
  document.getElementById("change").innerText = "0";
  renderCart();
}

function complete(){
  alert("ê²°ì œ ì™„ë£Œ!");
  resetAll();
}

renderCategories();
</script>
</body>
</html>
