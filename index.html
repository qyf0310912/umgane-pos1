<!doctype html>
<html lang="ko">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>엄가네 POS</title>

<style>
:root{
  --bg:#0f1115;
  --panel:#161a22;
  --line:rgba(255,255,255,.12);
  --text:#f7f9ff;
  --muted:rgba(247,249,255,.65);
  --accent:#ff9f00;
  --good:#2fd27e;
  --danger:#ff4d4f;
  --btn:#f4f5f7;
  --btnText:#111;
}

*{box-sizing:border-box}
html,body{
  margin:0;height:100%;
  background:var(--bg);
  color:var(--text);
  font-family:-apple-system,BlinkMacSystemFont,"Noto Sans KR",sans-serif;
}

.app{
  height:100%;
  display:grid;
  grid-template-columns:3fr 1fr;
  gap:14px;
  padding:14px;
}

/* ---------- LEFT ---------- */
.left{
  background:var(--panel);
  border:1px solid var(--line);
  border-radius:20px;
  display:flex;
  flex-direction:column;
  overflow:hidden;
}

.tabs{
  display:flex;
  gap:8px;
  padding:10px;
  border-bottom:1px solid var(--line);
}
.tab{
  padding:8px 14px;
  border-radius:999px;
  border:1px solid var(--line);
  background:#1e2330;
  color:var(--text);
  font-weight:800;
  cursor:pointer;
}
.tab.active{
  background:rgba(255,159,0,.2);
  border-color:rgba(255,159,0,.4);
}

.products{
  flex:1;
  overflow:auto;
  padding:12px;
  display:grid;
  grid-template-columns:repeat(4,1fr);
  gap:12px;
}

.product{
  background:#222838;
  border:1px solid var(--line);
  border-radius:16px;
  padding:14px;
  cursor:pointer;
  transition:.1s;
}
.product:active{transform:scale(.98)}
.product.flash{
  box-shadow:0 0 0 3px rgba(255,159,0,.4);
}
.pname{
  font-size:18px;
  font-weight:900;
}
.pprice{
  margin-top:6px;
  font-size:14px;
  opacity:.85;
}

/* ---------- RIGHT ---------- */
.right{
  background:var(--panel);
  border:1px solid var(--line);
  border-radius:20px;
  display:flex;
  flex-direction:column;
  padding:12px;
  gap:10px;
}

.cart{
  flex:1;
  overflow:auto;
}
.item{
  background:#1d2230;
  border:1px solid var(--line);
  border-radius:12px;
  padding:10px;
  margin-bottom:8px;
}
.item b{font-size:14px}

.summary{
  border-top:1px solid var(--line);
  padding-top:8px;
}
.row{
  display:flex;
  justify-content:space-between;
  align-items:flex-end;
  font-weight:900;
}
.row .label{font-size:12px;opacity:.7}
.row .val{font-size:18px}

.money{
  display:grid;
  grid-template-columns:repeat(3,1fr);
  gap:8px;
}
.money button{
  padding:12px;
  border-radius:12px;
  border:none;
  font-size:16px;
  font-weight:900;
  cursor:pointer;
}
.reset{background:rgba(255,77,79,.2);color:#ffd1d1}
.money button:not(.reset){
  background:var(--btn);
  color:var(--btnText);
}

.pay{
  background:var(--accent);
  border:none;
  border-radius:14px;
  padding:14px;
  font-size:18px;
  font-weight:1000;
  cursor:pointer;
}
.pay.locked{opacity:.5;pointer-events:none}

/* ---------- POPUP ---------- */
.overlay{
  position:fixed;inset:0;
  background:rgba(0,0,0,.6);
  display:none;
  align-items:center;
  justify-content:center;
}
.overlay.show{display:flex}
.modal{
  background:#1a1f2b;
  padding:20px;
  border-radius:18px;
  text-align:left;
}
.modal button{
  margin-top:12px;
  padding:10px 14px;
  border-radius:12px;
  border:none;
  background:var(--good);
  font-weight:900;
}
</style>
</head>

<body>
<div class="app">

<!-- LEFT -->
<div class="left">
  <div class="tabs" id="tabs"></div>
  <div class="products" id="products"></div>
</div>

<!-- RIGHT -->
<div class="right">
  <div class="cart" id="cart"></div>

  <div class="summary">
    <div class="row">
      <div class="label">총합계</div>
      <div class="val" id="sum">0원</div>
    </div>
    <div class="row">
      <div class="label">총수량</div>
      <div class="val" id="qty">0</div>
    </div>
    <div class="row">
      <div class="label">받은돈</div>
      <div class="val" id="received">0원</div>
    </div>
    <div class="row">
      <div class="label">거스름돈</div>
      <div class="val" id="change">0원</div>
    </div>
  </div>

  <div class="money">
    <button data-add="500">500</button>
    <button data-add="1000">1천</button>
    <button data-add="5000">5천</button>
    <button data-add="10000">1만</button>
    <button data-add="50000">5만</button>
    <button class="reset">초기화</button>
  </div>

  <button class="pay" id="pay">결제완료</button>
</div>
</div>

<div class="overlay" id="overlay">
  <div class="modal">
    <b>결제 완료</b><br><br>
    <button id="close">확인</button>
  </div>
</div>

<script>
const categories=["과일","야채"];
const products=[
  {id:"apple",cat:"과일",name:"사과",price:3000},
  {id:"tomato",cat:"과일",name:"토마토",price:10000},
  {id:"banana",cat:"과일",name:"바나나",price:2500},
  {id:"onion",cat:"야채",name:"양파",price:3000},
  {id:"potato",cat:"야채",name:"감자",price:3000},
];

const cart={}, productMap=Object.fromEntries(products.map(p=>[p.id,p]));
let active="과일", received=0, locked=false;

const tabs=document.getElementById("tabs");
const grid=document.getElementById("products");
const cartBox=document.getElementById("cart");

function renderTabs(){
  tabs.innerHTML="";
  categories.forEach(c=>{
    const b=document.createElement("button");
    b.className="tab"+(c===active?" active":"");
    b.textContent=c;
    b.onclick=()=>{active=c;renderProducts()};
    tabs.appendChild(b);
  });
}

function renderProducts(){
  grid.innerHTML="";
  products.filter(p=>p.cat===active).forEach(p=>{
    const d=document.createElement("div");
    d.className="product";
    d.innerHTML=`<div class="pname">${p.name}</div><div class="pprice">${p.price.toLocaleString()}원</div>`;
    d.onclick=()=>{
      cart[p.id]=(cart[p.id]||0)+1;
      d.classList.add("flash");
      setTimeout(()=>d.classList.remove("flash"),120);
      renderCart();
    };
    grid.appendChild(d);
  });
}

function renderCart(){
  cartBox.innerHTML="";
  let sum=0,qty=0;
  Object.keys(cart).forEach(id=>{
    const p=productMap[id];
    sum+=p.price*cart[id];
    qty+=cart[id];
    const d=document.createElement("div");
    d.className="item";
    d.innerHTML=`<b>${p.name}</b> x${cart[id]}<br>${(p.price*cart[id]).toLocaleString()}원`;
    cartBox.appendChild(d);
  });
  document.getElementById("sum").textContent=sum.toLocaleString()+"원";
  document.getElementById("qty").textContent=qty;
  document.getElementById("received").textContent=received.toLocaleString()+"원";
  document.getElementById("change").textContent=Math.max(0,received-sum).toLocaleString()+"원";
}

document.querySelectorAll(".money button[data-add]").forEach(b=>{
  b.onclick=()=>{received+=+b.dataset.add;renderCart()}
});
document.querySelector(".reset").onclick=()=>{received=0;renderCart()};

document.getElementById("pay").onclick=()=>{
  if(locked)return;
  locked=true;
  document.getElementById("pay").classList.add("locked");
  document.getElementById("overlay").classList.add("show");
  setTimeout(()=>{
    locked=false;
    document.getElementById("pay").classList.remove("locked");
    for(let k in cart)delete cart[k];
    received=0;
    renderCart();
  },1000);
};

document.getElementById("close").onclick=()=>{
  document.getElementById("overlay").classList.remove("show");
};

renderTabs();renderProducts();renderCart();
</script>
</body>
</html>
