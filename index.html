<!doctype html>
<html lang="ko">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>엄가네 POS</title>

<style>
:root{
  --bg:#0f1219;
  --panel:#141a26;
  --card:#1e2639;
  --line:rgba(255,255,255,.1);
  --text:#f7f9ff;
  --muted:rgba(255,255,255,.6);
  --accent:#ff9f00;
}

*{box-sizing:border-box}
body{
  margin:0;
  background:var(--bg);
  color:var(--text);
  font-family:-apple-system,BlinkMacSystemFont,"Noto Sans KR",system-ui;
}

/* 상단 카테고리 */
.top{
  display:flex;
  gap:10px;
  padding:12px;
  border-bottom:1px solid var(--line);
  background:#0b0e14;
}
.cat{
  padding:10px 18px;
  border-radius:999px;
  border:1px solid var(--line);
  background:#1a2030;
  font-weight:900;
  cursor:pointer;
}
.cat.active{
  background:rgba(255,159,0,.2);
  border-color:var(--accent);
  color:#ffd28a;
}

/* 상품 영역 */
.products{
  padding:12px;
  display:grid;
  grid-template-columns:repeat(4,1fr);
  gap:12px;
}
.card{
  background:linear-gradient(180deg,#242f4a,#1e2639);
  border-radius:18px;
  padding:14px;
  border:1px solid rgba(255,255,255,.12);
  cursor:pointer;
}
.name{font-size:18px;font-weight:900}
.price{margin-top:6px;font-size:14px;font-weight:800;opacity:.9}
.used{
  position:absolute;
  right:12px;
  top:12px;
  font-size:12px;
  opacity:.6;
}
.cardWrap{position:relative}
</style>
</head>

<body>

<div class="top" id="cats"></div>
<div class="products" id="products"></div>

<script>
/* ===== 상품 데이터 (지금은 하드코딩, 나중에 시트 연결 가능) ===== */
const ITEMS = [
  {name:"사과", price:3000, cat:"과일"},
  {name:"바나나", price:2500, cat:"과일"},
  {name:"토마토", price:10000, cat:"과일"},

  {name:"감자", price:3000, cat:"야채"},
  {name:"고구마", price:3000, cat:"야채"},
  {name:"양파", price:2500, cat:"야채"},
  {name:"당근", price:2500, cat:"야채"},

  {name:"상추", price:1500, cat:"잎채소"},
  {name:"깻잎", price:2000, cat:"잎채소"},
  {name:"부추", price:2000, cat:"잎채소"},

  {name:"고등어", price:6000, cat:"생선"},
];

const CATS = ["전체","과일","야채","잎채소","생선"];

let currentCat="전체";

/* 클릭 횟수 저장 */
const used = JSON.parse(localStorage.getItem("USED")||"{}");
const saveUsed=()=>localStorage.setItem("USED",JSON.stringify(used));

/* 카테고리 렌더 */
const catsEl=document.getElementById("cats");
function renderCats(){
  catsEl.innerHTML="";
  CATS.forEach(c=>{
    const b=document.createElement("div");
    b.className="cat"+(c===currentCat?" active":"");
    b.textContent=c;
    b.onclick=()=>{currentCat=c; renderAll();}
    catsEl.appendChild(b);
  });
}

/* 상품 렌더 */
const prodEl=document.getElementById("products");
function renderProducts(){
  prodEl.innerHTML="";
  ITEMS
    .filter(i=>currentCat==="전체"||i.cat===currentCat)
    .sort((a,b)=>(used[b.name]||0)-(used[a.name]||0))
    .forEach(i=>{
      const d=document.createElement("div");
      d.className="cardWrap";
      d.innerHTML=`
        <div class="card">
          <div class="name">${i.name}</div>
          <div class="price">${i.price.toLocaleString()}원</div>
        </div>
        <div class="used">사용 ${used[i.name]||0}</div>
      `;
      d.onclick=()=>{
        used[i.name]=(used[i.name]||0)+1;
        saveUsed();
        renderProducts();
      };
      prodEl.appendChild(d);
    });
}

function renderAll(){
  renderCats();
  renderProducts();
}

renderAll();
</script>

</body>
</html>
