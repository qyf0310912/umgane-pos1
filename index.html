<!doctype html>
<html lang="ko">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1,viewport-fit=cover" />
<title>ÏóÑÍ∞ÄÎÑ§ POS</title>

<style>
:root{
  --bg:#0f1219;
  --panel:#121827;
  --card1:#1e2639;
  --card2:#242f4a;
  --line:rgba(255,255,255,.12);
  --text:#f7f9ff;
  --muted:rgba(247,249,255,.65);
  --accent:#ff9f00;
  --danger:#ff4d4f;
}

*{box-sizing:border-box}
html,body{
  height:100%; margin:0;
  background:var(--bg); color:var(--text);
  font-family:-apple-system,BlinkMacSystemFont,"Noto Sans KR",system-ui,Segoe UI,Roboto,sans-serif;
}
button,input{font:inherit}
button{border:none; background:none; color:inherit; cursor:pointer}

/* ÏÉÅÎã®Î∞î */
.topbar{
  height:56px;
  display:flex; align-items:center; gap:12px;
  padding:0 14px;
  border-bottom:1px solid var(--line);
  background:#0b0e14;
}
.burger{
  font-size:22px;
  padding:6px 10px;
  border-radius:10px;
  background:rgba(255,255,255,.06);
}
.title{font-weight:900}

/* ÎìúÎ°úÏñ¥ */
.drawer{
  position:fixed; inset:0 auto 0 0;
  width:220px;
  background:#0b0e14;
  border-right:1px solid var(--line);
  transform:translateX(-100%);
  transition:.2s;
  z-index:10;
}
.drawer.open{transform:translateX(0)}
.drawer button{
  display:block;
  width:100%;
  padding:14px;
  text-align:left;
  font-weight:900;
  border-bottom:1px solid var(--line);
}
.drawer button.active{
  background:rgba(255,159,0,.18);
  color:var(--accent);
}

/* Î≥∏Î¨∏ */
.main{padding:12px}
.grid{
  display:grid;
  grid-template-columns:repeat(auto-fill,minmax(160px,1fr));
  gap:12px;
}
.card{
  background:linear-gradient(180deg,var(--card2),var(--card1));
  border:1px solid var(--line);
  border-radius:16px;
  padding:14px;
}
.name{font-weight:900}
.price{margin-top:6px; opacity:.9}
.pin{float:right}
</style>
</head>

<body>

<div class="topbar">
  <button class="burger" onclick="toggleDrawer()">‚ò∞</button>
  <div class="title" id="currentCat">Ï†ÑÏ≤¥</div>
</div>

<div class="drawer" id="drawer"></div>

<div class="main">
  <div class="grid" id="grid"></div>
</div>

<!-- ÏÉÅÌíà Îç∞Ïù¥ÌÑ∞ -->
<script src="./items.js"></script>

<script>
let currentCat = "Ï†ÑÏ≤¥";

/* ÎìúÎ°úÏñ¥ Ïó¥Í≥†Îã´Í∏∞ */
function toggleDrawer(){
  document.getElementById("drawer").classList.toggle("open");
}

/* Ïπ¥ÌÖåÍ≥†Î¶¨ Î†åÎçî */
function renderDrawer(cats){
  const d = document.getElementById("drawer");
  d.innerHTML = "";
  ["Ï†ÑÏ≤¥", ...cats].forEach(c=>{
    const b=document.createElement("button");
    b.textContent=c;
    if(c===currentCat) b.classList.add("active");
    b.onclick=()=>{
      currentCat=c;
      renderAll();
    };
    d.appendChild(b);
  });
}

/* ÏÉÅÌíà Î†åÎçî */
function renderAll(){
  if(!window.ITEMS || !ITEMS.length) return;

  document.getElementById("currentCat").textContent=currentCat;
  document.getElementById("drawer").classList.remove("open");

  const list = ITEMS
    .filter(i=> currentCat==="Ï†ÑÏ≤¥" || i.cat===currentCat)
    .sort((a,b)=>{
      if((b.usage||0)!==(a.usage||0)) return (b.usage||0)-(a.usage||0);
      return (b.last||0)-(a.last||0);
    });

  const g=document.getElementById("grid");
  g.innerHTML="";

  list.forEach(i=>{
    const c=document.createElement("div");
    c.className="card";
    c.innerHTML=`
      <div class="name">
        ${i.name}
        ${i.pinned?'üìå':''}
      </div>
      <div class="price">${Number(i.price).toLocaleString()}Ïõê</div>
    `;
    c.onclick=()=>{
      i.usage=(i.usage||0)+1;
      i.last=Date.now();
      renderAll();
    };
    g.appendChild(c);
  });
}

/* items.js Î°úÎìú ÏôÑÎ£å ÌõÑ Ïã§Ìñâ */
document.addEventListener("ITEMS_READY",()=>{
  const cats=[...new Set(ITEMS.map(i=>i.cat))];
  renderDrawer(cats);
  renderAll();
});
</script>

</body>
</html>
