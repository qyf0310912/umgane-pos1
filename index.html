<!doctype html>
<html lang="ko">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>ÏóÑÍ∞ÄÎÑ§ POS</title>

<style>
body{margin:0;background:#0b0c10;color:#fff;font-family:sans-serif}
.top{display:flex;align-items:center;padding:10px;background:#111}
.hamburger{font-size:22px;cursor:pointer}
.title{margin-left:10px;font-weight:bold}
.drawer{
  position:fixed;top:0;left:-240px;width:240px;height:100%;
  background:#161a22;transition:.3s;padding:20px
}
.drawer.open{left:0}
.drawer button{
  width:100%;margin-bottom:10px;padding:12px;
  background:#222;border:none;color:#fff;font-size:16px
}
.drawer button.active{background:#ff9f00;color:#000}
.grid{display:grid;grid-template-columns:repeat(3,1fr);gap:12px;padding:12px}
.card{
  background:#1b2233;border-radius:12px;padding:14px;
  cursor:pointer
}
.card .name{font-size:18px}
.card .price{margin-top:6px;font-size:14px}
.pin{float:right;color:#ff3b30}
</style>
</head>

<body>

<div class="top">
  <div class="hamburger" onclick="toggleDrawer()">‚ò∞</div>
  <div class="title" id="currentCat">Ï†ÑÏ≤¥</div>
</div>

<div class="drawer" id="drawer"></div>

<div class="grid" id="grid"></div>

<script src="./items.js"></script>
<script>
let currentCat = "Ï†ÑÏ≤¥";

function toggleDrawer(){
  document.getElementById("drawer").classList.toggle("open");
}

function renderDrawer(cats){
  const d = document.getElementById("drawer");
  d.innerHTML = "";
  ["Ï†ÑÏ≤¥",...cats].forEach(c=>{
    const b=document.createElement("button");
    b.textContent=c;
    if(c===currentCat) b.classList.add("active");
    b.onclick=()=>{currentCat=c;renderAll()};
    d.appendChild(b);
  });
}

function renderAll(){
  document.getElementById("currentCat").textContent=currentCat;
  document.getElementById("drawer").classList.remove("open");

  let items = window.ITEMS
    .filter(i=>currentCat==="Ï†ÑÏ≤¥"||i.cat===currentCat)
    .sort((a,b)=>{
      if(a.pinned!==b.pinned) return b.pinned-a.pinned;
      if(a.usage!==b.usage) return b.usage-a.usage;
      return b.last-a.last;
    });

  const g=document.getElementById("grid");
  g.innerHTML="";
  items.forEach(i=>{
    const c=document.createElement("div");
    c.className="card";
    c.innerHTML=`
      <div class="name">${i.name}
        ${i.pinned?'<span class="pin">üìå</span>':''}
      </div>
      <div class="price">${i.price.toLocaleString()}Ïõê</div>
    `;
    c.onclick=()=>{
      i.usage++;
      i.last=Date.now();
      renderAll();
    };
    g.appendChild(c);
  });
}

document.addEventListener("ITEMS_READY",()=>{
  const cats=[...new Set(ITEMS.map(i=>i.cat))];
  renderDrawer(cats);
  renderAll();
});
</script>

</body>
</html>
