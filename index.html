<!doctype html>
<html lang="ko">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>엄가네 현장 계산기</title>

<style>
* { box-sizing: border-box; }
body {
  margin:0; background:#0f0f0f; color:#fff;
  font-family:-apple-system,BlinkMacSystemFont,system-ui,sans-serif;
}

/* 헤더 */
header {
  background:#ff9800;
  color:#111;
  font-weight:900;
  padding:14px;
  text-align:center;
  font-size:20px;
}

/* 전체 레이아웃 */
.main {
  display:grid;
  grid-template-columns: 3fr 1fr;
  height: calc(100vh - 56px);
}

/* ===== 좌측: 품목 ===== */
.left {
  padding:10px;
  overflow:hidden;
  display:flex;
  flex-direction:column;
}

.categories {
  display:flex;
  gap:8px;
  margin-bottom:10px;
}
.categories button {
  flex:1;
  padding:10px 0;
  background:#222;
  color:#fff;
  border:0;
  border-radius:8px;
  font-weight:700;
}
.categories button.active {
  background:#ff9800;
  color:#111;
}

.items {
  flex:1;
  overflow:auto;
  display:grid;
  grid-template-columns: repeat(auto-fill, minmax(160px,1fr));
  gap:10px;
}
.item {
  background:#1c1c1c;
  border-radius:10px;
  padding:14px;
  display:flex;
  flex-direction:column;
  justify-content:space-between;
  cursor:pointer;
}
.item-name { font-size:16px; font-weight:700; }
.item-price { margin-top:6px; font-weight:900; }

/* ===== 우측: 장바구니/결제 ===== */
.right {
  border-left:2px solid #222;
  display:flex;
  flex-direction:column;
}

/* 장바구니 */
.cart {
  flex:1;
  overflow:auto;
  padding:10px;
}
.cart h2 {
  margin:0 0 8px 0;
  font-size:18px;
}
.cart-item {
  display:flex;
  justify-content:space-between;
  align-items:center;
  background:#1b1b1b;
  padding:8px 10px;
  border-radius:8px;
  margin-bottom:6px;
  font-size:14px;
}
.cart-item span.qty {
  opacity:.8;
  margin-left:4px;
}
.cart-item button {
  background:#ff3b30;
  border:0;
  color:#fff;
  font-weight:900;
  border-radius:6px;
  width:28px;
  height:28px;
}

/* 결제영역 */
.pay {
  border-top:2px solid #222;
  padding:10px;
  background:#111;
}
.total {
  font-size:20px;
  font-weight:900;
  display:flex;
  justify-content:space-between;
}
.total small {
  font-size:14px;
  opacity:.8;
}

.money {
  margin-top:8px;
  font-size:16px;
  display:flex;
  justify-content:space-between;
}

.money-buttons {
  display:grid;
  grid-template-columns: repeat(3,1fr);
  gap:6px;
  margin-top:8px;
}
.money-buttons button {
  padding:12px 0;
  font-size:16px;
  font-weight:900;
  border-radius:8px;
  border:0;
}

.complete {
  margin-top:8px;
  background:#34c759;
  color:#111;
  font-size:20px;
  font-weight:900;
  padding:14px;
  border:0;
  border-radius:10px;
}
.reset {
  background:#ff3b30;
  color:#fff;
}
</style>
</head>

<body>
<header>엄가네 현장 계산기</header>

<div class="main">
  <!-- 좌측 -->
  <div class="left">
    <div class="categories" id="categories"></div>
    <div class="items" id="items"></div>
  </div>

  <!-- 우측 -->
  <div class="right">
    <div class="cart">
      <h2>장바구니</h2>
      <div id="cartList"></div>
    </div>

    <div class="pay">
      <div class="total">
        <div>총합계 ₩<span id="total">0</span></div>
        <small>총 <span id="totalQty">0</span>개</small>
      </div>

      <div class="money">
        <div>받은돈 ₩<span id="paid">0</span></div>
        <div>거스름 ₩<span id="change">0</span></div>
      </div>

      <div class="money-buttons">
        <button onclick="addMoney(1000)">1천</button>
        <button onclick="addMoney(5000)">5천</button>
        <button onclick="addMoney(10000)">1만</button>
        <button onclick="addMoney(30000)">3만</button>
        <button onclick="addMoney(50000)">5만</button>
        <button class="reset" onclick="resetMoney()">초기화</button>
      </div>

      <button class="complete" onclick="complete()">결제 완료</button>
    </div>
  </div>
</div>

<script src="items.js"></script>
<script>
const cats = ["과일","야채","잎채소","생선"];
let activeCat = "과일";
let cart = {};
let total = 0;
let totalQty = 0;
let paid = 0;

const catEl = document.getElementById("categories");
cats.forEach(c=>{
  const b=document.createElement("button");
  b.textContent=c;
  if(c===activeCat) b.classList.add("active");
  b.onclick=()=>{activeCat=c;render();};
  catEl.appendChild(b);
});

function render(){
  document.querySelectorAll(".categories button").forEach(b=>{
    b.classList.toggle("active", b.textContent===activeCat);
  });

  const itemsEl=document.getElementById("items");
  itemsEl.innerHTML="";
  ITEMS.filter(i=>i.cat===activeCat).forEach(i=>{
    const d=document.createElement("div");
    d.className="item";
    d.innerHTML=`<div class="item-name">${i.name}</div>
                 <div class="item-price">₩${i.price.toLocaleString()}</div>`;
    d.onclick=()=>addItem(i);
    itemsEl.appendChild(d);
  });

  updateCart();
}

function addItem(i){
  if(!cart[i.id]) cart[i.id]={...i,qty:0};
  cart[i.id].qty++;
  updateCart();
}

function updateCart(){
  const list=document.getElementById("cartList");
  list.innerHTML="";
  total=0; totalQty=0;
  Object.values(cart).forEach(i=>{
    total+=i.price*i.qty;
    totalQty+=i.qty;
    const d=document.createElement("div");
    d.className="cart-item";
    d.innerHTML=`<div>${i.name} <span class="qty">x${i.qty}</span></div>
                 <div>₩${(i.price*i.qty).toLocaleString()}</div>
                 <button onclick="removeItem('${i.id}')">✕</button>`;
    list.appendChild(d);
  });
  document.getElementById("total").innerText=total.toLocaleString();
  document.getElementById("totalQty").innerText=totalQty;
  updateMoney();
}

function removeItem(id){
  delete cart[id];
  updateCart();
}

function addMoney(v){
  paid+=v;
  updateMoney();
}
function resetMoney(){
  paid=0;
  updateMoney();
}
function updateMoney(){
  document.getElementById("paid").innerText=paid.toLocaleString();
  document.getElementById("change").innerText=Math.max(paid-total,0).toLocaleString();
}
function complete(){
  alert("결제 완료");
  cart={};
  resetMoney();
  updateCart();
}

render();
</script>
</body>
</html>
