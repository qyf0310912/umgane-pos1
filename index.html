<!DOCTYPE html>
<html lang="ko">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0"/>
<title>엄가네 현장 계산기</title>

<style>
:root{
  --bg:#0e0e0e;
  --panel:#1a1a1a;
  --card:#222;
  --accent:#ffae00;
  --text:#fff;
  --sub:#aaa;
  --green:#2ecc71;
  --red:#ff3b30;
}

*{box-sizing:border-box}
body{
  margin:0;
  font-family:-apple-system,BlinkMacSystemFont,"Segoe UI",sans-serif;
  background:var(--bg);
  color:var(--text);
}

/* ===== HEADER ===== */
header{
  background:var(--accent);
  color:#111;
  padding:12px;
  text-align:center;
  font-weight:700;
  font-size:18px;
}

/* ===== LAYOUT ===== */
main{
  display:flex;
  height:calc(100vh - 48px);
}

.left{
  width:70%;
  padding:12px;
  overflow:auto;
}

.right{
  width:30%;
  padding:12px;
  background:#111;
  display:flex;
  flex-direction:column;
}

/* ===== CATEGORY ===== */
.categories{
  display:flex;
  gap:8px;
  margin-bottom:10px;
}
.cat{
  flex:1;
  padding:10px;
  border-radius:10px;
  background:#222;
  text-align:center;
  cursor:pointer;
}
.cat.active{
  background:var(--accent);
  color:#111;
  font-weight:700;
}

/* ===== SEARCH ===== */
.search{
  margin-bottom:10px;
}
.search input{
  width:100%;
  padding:10px;
  border-radius:10px;
  border:none;
  font-size:16px;
}

/* ===== ITEMS GRID ===== */
.grid{
  display:grid;
  grid-template-columns:repeat(5,1fr);
  gap:10px;
}

.item{
  background:var(--card);
  border-radius:14px;
  padding:14px 10px;
  text-align:center;
  cursor:pointer;
}
.item-name{
  font-size:18px;
  font-weight:700;
}
.item-unit{
  font-size:11px;
  color:var(--sub);
}
.item-price{
  margin-top:6px;
  font-size:13px;
  color:#ddd;
}

/* ===== CART ===== */
.cart-header{
  display:flex;
  justify-content:space-between;
  align-items:center;
  font-size:18px;
  font-weight:700;
  margin-bottom:8px;
}

.cart-list{
  flex:1;
  background:var(--panel);
  border-radius:12px;
  padding:8px;
  overflow:auto;
}

.cart-item{
  display:flex;
  justify-content:space-between;
  align-items:center;
  padding:6px 4px;
  border-bottom:1px solid #333;
  font-size:14px;
}
.cart-item span.qty{
  color:var(--accent);
  margin-left:6px;
}
.cart-item button{
  background:none;
  border:none;
  color:var(--red);
  font-size:16px;
  cursor:pointer;
}

/* ===== PAYMENT ===== */
.pay-info{
  margin-top:10px;
  background:var(--panel);
  border-radius:12px;
  padding:10px;
  display:flex;
  justify-content:space-between;
  font-size:16px;
}

.money-buttons{
  display:grid;
  grid-template-columns:repeat(3,1fr);
  gap:8px;
  margin-top:10px;
}
.money-buttons button{
  padding:12px;
  border-radius:10px;
  border:none;
  font-size:16px;
  cursor:pointer;
}

.reset{
  background:var(--red);
  color:#fff;
}

.pay{
  margin-top:10px;
  padding:16px;
  border:none;
  border-radius:14px;
  font-size:20px;
  font-weight:700;
  background:var(--green);
  cursor:pointer;
}
</style>
</head>

<body>
<header>엄가네 현장 계산기</header>

<main>
  <!-- LEFT -->
  <div class="left">
    <div class="categories">
      <div class="cat active" onclick="setCat('과일')">과일</div>
      <div class="cat" onclick="setCat('야채')">야채</div>
      <div class="cat" onclick="setCat('잎채소')">잎채소</div>
      <div class="cat" onclick="setCat('생선')">생선</div>
    </div>

    <div class="search">
      <input placeholder="검색 (예: ㄱ, 고구마, 감자)" oninput="searchItem(this.value)">
    </div>

    <div class="grid" id="items"></div>
  </div>

  <!-- RIGHT -->
  <div class="right">
    <div class="cart-header">
      <div>총합계</div>
      <div>₩<span id="total">0</span> / 총 <span id="count">0</span>개</div>
    </div>

    <div class="cart-list" id="cart"></div>

    <div class="pay-info">
      <div>받은돈 ₩<span id="paid">0</span></div>
      <div>거스름 ₩<span id="change">0</span></div>
    </div>

    <div class="money-buttons">
      <button onclick="addMoney(1000)">1천</button>
      <button onclick="addMoney(5000)">5천</button>
      <button onclick="addMoney(10000)">1만</button>
      <button onclick="addMoney(30000)">3만</button>
      <button onclick="addMoney(50000)">5만</button>
      <button class="reset" onclick="resetMoney()">초기화</button>
    </div>

    <button class="pay" onclick="complete()">결제 완료</button>
  </div>
</main>

<script>
const items=[
  {cat:"야채",name:"감자",price:3000},
  {cat:"야채",name:"고구마",price:3000},
  {cat:"야채",name:"양파",price:2500},
  {cat:"야채",name:"애호박 3개",price:3500},
  {cat:"과일",name:"사과 3개",price:5000},
  {cat:"과일",name:"사과 7개",price:10000},
  {cat:"과일",name:"단감 3개",price:5000},
  {cat:"과일",name:"단감 7개",price:10000},
];

let currentCat="과일";
let cart={};
let paid=0;

function render(){
  const grid=document.getElementById("items");
  grid.innerHTML="";
  items.filter(i=>i.cat===currentCat).forEach(i=>{
    const d=document.createElement("div");
    d.className="item";
    d.onclick=()=>addItem(i);
    d.innerHTML=`
      <div class="item-name">${i.name}</div>
      <div class="item-price">₩${i.price.toLocaleString()}</div>
    `;
    grid.appendChild(d);
  });
}

function addItem(i){
  if(!cart[i.name]) cart[i.name]={...i,qty:0};
  cart[i.name].qty++;
  updateCart();
}

function updateCart(){
  const c=document.getElementById("cart");
  c.innerHTML="";
  let total=0,count=0;
  Object.values(cart).forEach(i=>{
    total+=i.price*i.qty;
    count+=i.qty;
    const row=document.createElement("div");
    row.className="cart-item";
    row.innerHTML=`
      <div>${i.name}<span class="qty"> x${i.qty}</span></div>
      <button onclick="removeItem('${i.name}')">✕</button>
    `;
    c.appendChild(row);
  });
  document.getElementById("total").innerText=total.toLocaleString();
  document.getElementById("count").innerText=count;
  document.getElementById("change").innerText=Math.max(paid-total,0).toLocaleString();
}

function removeItem(name){
  delete cart[name];
  updateCart();
}

function addMoney(m){
  paid+=m;
  document.getElementById("paid").innerText=paid.toLocaleString();
  updateCart();
}

function resetMoney(){
  paid=0;
  document.getElementById("paid").innerText="0";
  document.getElementById("change").innerText="0";
}

function complete(){
  alert("결제 완료");
  cart={};
  paid=0;
  updateCart();
  document.getElementById("paid").innerText="0";
}

function setCat(c){
  currentCat=c;
  document.querySelectorAll(".cat").forEach(x=>x.classList.remove("active"));
  event.target.classList.add("active");
  render();
}

function searchItem(v){
  const grid=document.getElementById("items");
  grid.innerHTML="";
  items.filter(i=>i.name.includes(v)).forEach(i=>{
    const d=document.createElement("div");
    d.className="item";
    d.onclick=()=>addItem(i);
    d.innerHTML=`
      <div class="item-name">${i.name}</div>
      <div class="item-price">₩${i.price.toLocaleString()}</div>
    `;
    grid.appendChild(d);
  });
}

render();
</script>
</body>
</html>
