<!doctype html>
<html lang="ko">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1,viewport-fit=cover" />
<title>엄가네 POS</title>

<style>
:root{
  --bg:#0f1219; --panel:#121827; --card1:#1e2639; --card2:#242f4a;
  --line:rgba(255,255,255,.12); --text:#f7f9ff;
  --muted:rgba(247,249,255,.65); --accent:#ff9f00;
  --danger:#ff4d4f; --good:#2fd27e;
  --btn:#f4f5f7; --btnText:#111;
  --shadow:0 14px 44px rgba(0,0,0,.35);
}
*{box-sizing:border-box}
html,body{height:100%;margin:0;background:var(--bg);color:var(--text);
font-family:-apple-system,BlinkMacSystemFont,"Noto Sans KR",system-ui}
button,input{font:inherit}
.app{height:100%;display:grid;grid-template-columns:3fr 1fr;gap:14px;padding:14px}
.left,.right{border:1px solid var(--line);border-radius:22px;box-shadow:var(--shadow);overflow:hidden}
.left{display:flex;flex-direction:column}
.topbar{padding:10px;border-bottom:1px solid var(--line)}
.products{padding:12px;overflow:auto;display:grid;grid-template-columns:repeat(4,1fr);gap:12px}
.card{background:linear-gradient(180deg,var(--card2),var(--card1));
border-radius:18px;padding:14px;cursor:pointer;position:relative}
.name{font-size:18px;font-weight:900}
.price{opacity:.9;margin-top:6px}
.meta{position:absolute;top:8px;right:8px;font-size:12px;opacity:.8}
.right{display:flex;flex-direction:column}
.cart{flex:1;padding:12px;overflow:auto}
.summary{padding:12px;border-top:1px solid var(--line)}
.money{padding:12px;border-top:1px solid var(--line);display:grid;grid-template-columns:repeat(3,1fr);gap:8px}
.money button{padding:12px;border-radius:12px;font-weight:900}
.pay{margin:12px;background:var(--accent);border-radius:14px;padding:16px;
font-size:18px;font-weight:900}
</style>
</head>

<body>
<div class="app">

  <section class="left">
    <div class="topbar">상품 목록</div>
    <div class="products" id="products"></div>
  </section>

  <section class="right">
    <div class="cart" id="cart">장바구니</div>
    <div class="summary">
      <div>총합계: <span id="sum">0</span>원</div>
    </div>
    <div class="money">
      <button data-add="500">500</button>
      <button data-add="1000">1천</button>
      <button data-add="5000">5천</button>
      <button data-add="10000">1만</button>
      <button data-add="50000">5만</button>
      <button id="reset">초기화</button>
    </div>
    <button class="pay">결제완료</button>
  </section>

</div>

<!-- ✅ 1. 구글시트 연동 (이게 핵심) -->
<script src="./items.js"></script>

<!-- ✅ 2. POS 로직 -->
<script>
const productsEl = document.getElementById("products");
const cartEl = document.getElementById("cart");
const sumEl = document.getElementById("sum");
const cart = {};

function renderProducts(){
  productsEl.innerHTML = "";
  (window.ITEMS || []).forEach(p=>{
    const d=document.createElement("div");
    d.className="card";
    d.innerHTML=`<div class="name">${p.name}</div>
                 <div class="price">${p.price.toLocaleString()}원</div>`;
    d.onclick=()=>addToCart(p.id,p.price);
    productsEl.appendChild(d);
  });
}

function addToCart(id,price){
  cart[id]=(cart[id]||0)+price;
  renderCart();
}

function renderCart(){
  let sum=0;
  cartEl.innerHTML="";
  for(const k in cart){
    sum+=cart[k];
    cartEl.innerHTML+=`<div>${k}: ${cart[k].toLocaleString()}원</div>`;
  }
  sumEl.textContent=sum.toLocaleString();
}

document.querySelectorAll(".money button[data-add]").forEach(b=>{
  b.onclick=()=>{ sumEl.textContent=(Number(sumEl.textContent.replace(/,/g,""))+Number(b.dataset.add)).toLocaleString(); }
});
document.getElementById("reset").onclick=()=>{ sumEl.textContent="0"; };

renderProducts();
</script>

</body>
</html>
