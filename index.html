<!doctype html>
<html lang="ko">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1,viewport-fit=cover" />
  <title>ì—„ê°€ë„¤ POS</title>
  <style>
    :root{
      --bg:#0b0c10;
      --panel:#111319;
      --panel2:#0f1116;
      --line:rgba(255,255,255,.08);
      --text:#f5f7ff;
      --muted:rgba(245,247,255,.65);
      --accent:#ff9f00;
      --accent2:#ffb84d;
      --danger:#ff4d4f;
      --good:#29d17e;
      --btn:#f3f4f6;
      --btnText:#111;
      --shadow:0 12px 40px rgba(0,0,0,.35);
      --r:18px;
    }
    *{box-sizing:border-box;}
    html,body{height:100%; margin:0; background:var(--bg); color:var(--text); font-family:system-ui,-apple-system,"Noto Sans KR",Segoe UI,Roboto,Arial;}
    button,input{font:inherit}
    .wrap{display:grid; grid-template-columns: 1fr 420px; gap:14px; padding:14px; height:100vh;}
    .panel{
      background:linear-gradient(180deg, rgba(255,255,255,.06), rgba(255,255,255,.02));
      border:1px solid var(--line);
      border-radius:22px;
      box-shadow:var(--shadow);
      overflow:hidden;
      min-height:0;
    }
    .left{display:flex; flex-direction:column; min-height:0;}
    .topbar{padding:14px 14px 10px; border-bottom:1px solid var(--line); background:rgba(0,0,0,.12)}
    .tabs{display:flex; gap:10px; flex-wrap:wrap;}
    .tab{
      padding:10px 16px;
      border-radius:999px;
      border:1px solid rgba(255,255,255,.14);
      background:rgba(255,255,255,.06);
      color:var(--text);
      cursor:pointer;
      user-select:none;
    }
    .tab.active{
      border-color:rgba(255,159,0,.55);
      box-shadow:0 0 0 3px rgba(255,159,0,.12) inset;
      background:rgba(255,159,0,.14);
    }

    .searchRow{display:flex; gap:10px; margin-top:10px; align-items:center;}
    .search{
      flex:1;
      display:flex;
      align-items:center;
      gap:10px;
      padding:10px 12px;
      border-radius:14px;
      border:1px solid rgba(255,255,255,.12);
      background:rgba(255,255,255,.05);
    }
    .search input{
      width:100%;
      background:transparent;
      border:none;
      outline:none;
      color:var(--text);
      font-size:16px;
    }
    .sortBtn{
      padding:10px 14px;
      border-radius:14px;
      border:1px solid rgba(255,255,255,.12);
      background:rgba(255,255,255,.05);
      color:var(--text);
      cursor:pointer;
      white-space:nowrap;
    }

    .choRow{display:flex; gap:8px; margin-top:10px; flex-wrap:wrap;}
    .choRow button{
      padding:10px 12px;
      min-width:44px;
      border-radius:12px;
      border:1px solid rgba(255,255,255,.12);
      background:rgba(255,255,255,.03);
      color:var(--text);
      cursor:pointer;
    }
    .hint{margin-top:10px; color:var(--muted); font-size:13px; line-height:1.3}
    .hint b{color:var(--accent2)}
    .list{
      padding:14px;
      overflow:auto;
      flex:1;
      min-height:0;
    }
    .grid{
      display:grid;
      grid-template-columns: repeat(4, minmax(180px, 1fr));
      gap:12px;
    }
    .card{
      position:relative;
      border-radius:18px;
      padding:14px 14px 12px;
      border:1px solid rgba(255,255,255,.10);
      background:linear-gradient(180deg, rgba(86,116,182,.26), rgba(50,68,120,.10));
      cursor:pointer;
      user-select:none;
      min-height:84px;
    }
    .name{font-weight:800; font-size:20px; letter-spacing:-0.3px;}
    .price{margin-top:8px; font-weight:700; color:rgba(245,247,255,.9)}
    .meta{
      position:absolute; right:12px; top:10px;
      display:flex; gap:8px; align-items:center;
      color:rgba(245,247,255,.7); font-size:12px;
    }
    .pin{
      width:30px; height:30px;
      border-radius:10px;
      display:grid; place-items:center;
      border:1px solid rgba(255,255,255,.10);
      background:rgba(0,0,0,.18);
      cursor:pointer;
    }
    .pin.on{
      border-color:rgba(255,159,0,.55);
      background:rgba(255,159,0,.16);
    }

    /* right panel */
    .right{display:flex; flex-direction:column; min-height:0;}
    .rTop{padding:14px; border-bottom:1px solid var(--line); background:rgba(0,0,0,.12); font-weight:800}
    .cartBox{padding:12px 14px 10px; flex:1; min-height:0; overflow:hidden; display:flex; flex-direction:column;}
    .cartList{
      border:1px solid rgba(255,255,255,.10);
      border-radius:18px;
      background:rgba(255,255,255,.02);
      padding:10px;
      flex:1;
      min-height:260px;
      overflow:auto;
    }
    .row{
      display:grid;
      grid-template-columns: 1fr auto auto auto;
      gap:8px;
      align-items:center;
      padding:10px 10px;
      border-bottom:1px dashed rgba(255,255,255,.08);
    }
    .row:last-child{border-bottom:none;}
    .row .title{font-weight:800}
    .row .sub{color:rgba(245,247,255,.65); font-size:12px; margin-top:4px}
    .qtyCtl{display:flex; gap:6px; align-items:center;}
    .qtyCtl button{
      width:34px; height:34px;
      border-radius:12px;
      border:1px solid rgba(255,255,255,.12);
      background:rgba(255,255,255,.05);
      color:var(--text);
      cursor:pointer;
      font-weight:900;
    }
    .qtyNum{min-width:26px; text-align:center; font-weight:900}
    .del{
      width:44px; height:34px;
      border-radius:12px;
      border:1px solid rgba(255,255,255,.12);
      background:rgba(255,77,79,.12);
      color:var(--text);
      cursor:pointer;
      font-weight:900;
    }

    .summary{
      display:grid;
      grid-template-columns: 1fr auto;
      gap:10px;
      padding:12px 14px;
      border-top:1px solid rgba(255,255,255,.10);
      border-bottom:1px solid rgba(255,255,255,.10);
      background:rgba(0,0,0,.10);
    }
    .bigLine{display:flex; justify-content:space-between; align-items:baseline;}
    .bigLine .label{color:rgba(245,247,255,.7); font-weight:700}
    .bigLine .val{font-size:22px; font-weight:900}
    .smallVal{font-size:18px; font-weight:900}

    .payRow{
      display:grid;
      grid-template-columns: 1fr 1fr;
      gap:10px;
      padding:12px 14px;
      border-bottom:1px solid rgba(255,255,255,.10);
      background:rgba(0,0,0,.10);
    }
    .payBox{
      border:1px solid rgba(255,255,255,.10);
      border-radius:16px;
      padding:10px 12px;
      background:rgba(255,255,255,.02);
    }
    .payBox .label{color:rgba(245,247,255,.7); font-weight:800; font-size:12px}
    .payBox .val{margin-top:6px; font-size:22px; font-weight:900}
    .moneyInput{
      margin-top:8px;
      width:100%;
      border:none;
      outline:none;
      background:transparent;
      color:var(--text);
      font-size:18px;
      font-weight:900;
    }

    .btns{padding:12px 14px 14px;}
    .chgGrid{
      display:grid;
      grid-template-columns: repeat(3, 1fr);
      gap:10px;
    }
    .chgGrid button{
      padding:12px 0;
      border-radius:14px;
      border:1px solid rgba(255,255,255,.10);
      background:var(--btn);
      color:var(--btnText);
      cursor:pointer;
      font-weight:900;
    }
    .chgGrid .reset{
      background:rgba(255,77,79,.18);
      color:var(--text);
    }
    .payBtn{
      width:100%;
      margin-top:12px;
      padding:18px 0;
      border:none;
      border-radius:16px;
      background:var(--accent);
      color:#111;
      font-weight:1000;
      font-size:20px;
      cursor:pointer;
    }

    .toast{
      position:fixed;
      left:50%;
      bottom:16px;
      transform:translateX(-50%);
      padding:10px 14px;
      border-radius:999px;
      border:1px solid rgba(255,255,255,.14);
      background:rgba(0,0,0,.55);
      color:rgba(245,247,255,.9);
      font-weight:700;
      opacity:0;
      pointer-events:none;
      transition:.18s;
    }
    .toast.on{opacity:1; transform:translateX(-50%) translateY(-6px);}

    /* responsive */
    @media (max-width: 1100px){
      .wrap{grid-template-columns:1fr; height:auto; min-height:100vh;}
      .right{height:520px;}
      .grid{grid-template-columns: repeat(3, minmax(160px,1fr));}
    }
    @media (max-width: 740px){
      .grid{grid-template-columns: repeat(2, minmax(160px,1fr));}
      .right{height:560px;}
    }
  </style>
</head>
<body>
  <div class="wrap">
    <section class="panel left">
      <div class="topbar">
        <div class="tabs" id="tabs"></div>

        <div class="searchRow">
          <div class="search">
            ğŸ”
            <input id="q" placeholder="ì „ì¹´í…Œê³ ë¦¬ ê²€ìƒ‰ (ì˜ˆ: ê°ì, ã„±ã…ˆ, ã„±ã„´ã„·)" autocomplete="off" />
          </div>
          <button class="sortBtn" id="sortBtn">ì •ë ¬: ê³ ì • + ë§ì´ ì°íŒ ìˆœ</button>
        </div>

        <div class="choRow" id="cho"></div>
        <div class="hint">â€» <b>ê³ ì •í•€</b>: ê¸¸ê²Œ ì“°ëŠ” í’ˆëª©ì„ â€œí•­ìƒ ìœ„â€ë¡œ ì˜¬ë¦½ë‹ˆë‹¤. (ëª¨ë°”ì¼=ê¸¸ê²Œëˆ„ë¥´ê¸° / PC=ìš°í´ë¦­)</div>
      </div>

      <div class="list">
        <div class="grid" id="grid"></div>
        <div id="empty" style="margin-top:14px; color:rgba(245,247,255,.65); display:none;">ê²€ìƒ‰ ê²°ê³¼ê°€ ì—†ìŠµë‹ˆë‹¤.</div>
      </div>
    </section>

    <aside class="panel right">
      <div class="rTop">ê²°ì œ</div>

      <div class="cartBox">
        <div class="cartList" id="cartList"></div>
      </div>

      <div class="summary">
        <div class="bigLine">
          <div class="label">ì´í•©ê³„</div>
          <div class="val" id="total">0ì›</div>
        </div>
        <div class="bigLine" style="justify-content:flex-end; gap:14px;">
          <div class="label">ë‹´ê¸´ê°¯ìˆ˜</div>
          <div class="smallVal" id="count">0</div>
        </div>
      </div>

      <div class="payRow">
        <div class="payBox">
          <div class="label">ë°›ì€ëˆ</div>
          <div class="val" id="paidView">0ì›</div>
          <input class="moneyInput" id="paidInput" inputmode="numeric" placeholder="(ìˆ«ì ì…ë ¥)" />
        </div>
        <div class="payBox">
          <div class="label">ê±°ìŠ¤ë¦„ëˆ</div>
          <div class="val" id="changeView">0ì›</div>
        </div>
      </div>

      <div class="btns">
        <div class="chgGrid">
          <button data-add="500">500</button>
          <button data-add="1000">1ì²œ</button>
          <button data-add="5000">5ì²œ</button>
          <button data-add="10000">1ë§Œ</button>
          <button data-add="50000">5ë§Œ</button>
          <button class="reset" data-reset="1">ì´ˆê¸°í™”</button>
        </div>
        <button class="payBtn" id="payBtn">ê²°ì œì™„ë£Œ</button>
      </div>
    </aside>
  </div>

  <div class="toast" id="toast"></div>

  <!-- ë°ì´í„° ë¡œë” -->
  <script src="items.js?v=1"></script>

  <script>
    /***************
     * ìƒíƒœ/ì €ì¥í‚¤
     ***************/
    const KEY_PIN = "UMGANE_PINNED_V1";
    const KEY_USE = "UMGANE_USED_V1";
    const KEY_CART = "UMGANE_CART_V1";

    const CATS = ["ê³¼ì¼","ì•¼ì±„","ë´‰ì±„ì†Œ","ìƒì„ ","ê¸°íƒ€"];
    let activeCat = "ê³¼ì¼";            // ê¸°ë³¸ íƒ­
    let q = "";
    let ITEMS = [];                   // {id,cat,name,unit,price,active}
    let pinned = new Set(JSON.parse(localStorage.getItem(KEY_PIN)||"[]"));
    let used = JSON.parse(localStorage.getItem(KEY_USE)||"{}"); // id -> count
    let cart = JSON.parse(localStorage.getItem(KEY_CART)||"[]"); // [{id,qty}]

    /***************
     * ìœ í‹¸
     ***************/
    const $ = (id)=>document.getElementById(id);
    const money = (n)=> (Math.max(0, n|0)).toLocaleString("ko-KR")+"ì›";
    const toast = (msg)=>{
      const t=$("toast"); t.textContent=msg; t.classList.add("on");
      setTimeout(()=>t.classList.remove("on"), 900);
    };

    // ì´ˆì„± ì¶”ì¶œ
    const CHO = ["ã„±","ã„²","ã„´","ã„·","ã„¸","ã„¹","ã…","ã…‚","ã…ƒ","ã……","ã…†","ã…‡","ã…ˆ","ã…‰","ã…Š","ã…‹","ã…Œ","ã…","ã…"];
    function getCho(str){
      let out="";
      for (const ch of str){
        const code = ch.charCodeAt(0);
        if (code >= 0xAC00 && code <= 0xD7A3){
          const idx = Math.floor((code - 0xAC00) / 588);
          out += CHO[idx] || "";
        } else if (/[ã„±-ã…]/.test(ch)){
          out += ch;
        } else if (/[0-9a-zA-Z]/.test(ch)){
          out += ch.toLowerCase();
        }
      }
      return out;
    }
    function norm(str){
      return (str||"").toString().replace(/\s+/g,"").toLowerCase();
    }

    function savePinned(){ localStorage.setItem(KEY_PIN, JSON.stringify([...pinned])); }
    function saveUsed(){ localStorage.setItem(KEY_USE, JSON.stringify(used)); }
    function saveCart(){ localStorage.setItem(KEY_CART, JSON.stringify(cart)); }

    function itemById(id){ return ITEMS.find(x=>String(x.id)===String(id)); }
    function cartCount(){ return cart.reduce((a,r)=>a+(r.qty|0),0); }
    function cartTotal(){
      return cart.reduce((a,r)=>{
        const it=itemById(r.id);
        return a + (it ? (it.price|0)*(r.qty|0) : 0);
      },0);
    }

    /***************
     * íƒ­ ë Œë”
     ***************/
    function renderTabs(){
      const tabs = $("tabs");
      tabs.innerHTML = "";
      for (const c of CATS){
        const b=document.createElement("button");
        b.className="tab"+(activeCat===c?" active":"");
        b.textContent=c;
        b.onclick=()=>{ activeCat=c; renderTabs(); renderProducts(); };
        tabs.appendChild(b);
      }
    }

    /***************
     * ìƒí’ˆ í•„í„°/ì •ë ¬/ë Œë”
     ***************/
    function matchQuery(it){
      if (!q) return true;
      const nq = norm(q);
      const name = norm(it.name);
      const cho = getCho(it.name);
      // "ê°ì" / "ã„±ã…ˆ" / "ã„±" ë‹¤ ë§¤ì¹­
      return name.includes(nq) || cho.includes(nq);
    }

    function filtered(){
      // ì¹´í…Œê³ ë¦¬ + ì¿¼ë¦¬
      return ITEMS
        .filter(it=> it.active !== 0 && it.active !== "0")
        .filter(it=> it.cat === activeCat)
        .filter(matchQuery);
    }

    function sorted(list){
      // 1) pinned ë¨¼ì € 2) ì‚¬ìš©íšŸìˆ˜ desc 3) ì´ë¦„ asc
      return list.slice().sort((a,b)=>{
        const ap = pinned.has(String(a.id)) ? 1 : 0;
        const bp = pinned.has(String(b.id)) ? 1 : 0;
        if (ap !== bp) return bp - ap;
        const au = used[String(a.id)] || 0;
        const bu = used[String(b.id)] || 0;
        if (au !== bu) return bu - au;
        return String(a.name).localeCompare(String(b.name),"ko");
      });
    }

    function togglePin(id){
      id=String(id);
      if (pinned.has(id)) pinned.delete(id);
      else pinned.add(id);
      savePinned();
      renderProducts();
    }

    function addToCart(id){
      id=String(id);
      const r = cart.find(x=>String(x.id)===id);
      if (r) r.qty = (r.qty|0)+1;
      else cart.push({id, qty:1});
      saveCart();

      used[id] = (used[id]||0)+1; // â€œë§ì´ ì°íŒ ìˆœâ€ ì¹´ìš´íŠ¸
      saveUsed();

      renderProducts();
      renderCart();
    }

    function renderProducts(){
      const grid=$("grid");
      const empty=$("empty");
      const list=sorted(filtered());
      grid.innerHTML="";
      empty.style.display = list.length ? "none" : "block";

      for (const it of list){
        const c=document.createElement("div");
        c.className="card";

        const meta=document.createElement("div");
        meta.className="meta";
        const use=document.createElement("div");
        use.textContent="ì‚¬ìš© "+(used[String(it.id)]||0);
        const pin=document.createElement("div");
        pin.className="pin"+(pinned.has(String(it.id))?" on":"");
        pin.textContent="ğŸ“Œ";
        pin.title="ê³ ì •í•€";
        pin.onclick=(e)=>{ e.stopPropagation(); togglePin(it.id); };
        meta.appendChild(use);
        meta.appendChild(pin);

        const name=document.createElement("div");
        name.className="name";
        name.textContent=it.unit ? `${it.name}/${it.unit}` : it.name;

        const price=document.createElement("div");
        price.className="price";
        price.textContent=money(it.price|0);

        c.appendChild(meta);
        c.appendChild(name);
        c.appendChild(price);

        // PC ìš°í´ë¦­ìœ¼ë¡œ ê³ ì • í† ê¸€
        c.addEventListener("contextmenu",(e)=>{ e.preventDefault(); togglePin(it.id); toast(pinned.has(String(it.id))?"ê³ ì • ON":"ê³ ì • OFF"); });

        // ëª¨ë°”ì¼ ê¸¸ê²Œ ëˆ„ë¥´ê¸°
        let pressT=null;
        c.addEventListener("touchstart",()=>{
          pressT=setTimeout(()=>{ togglePin(it.id); toast(pinned.has(String(it.id))?"ê³ ì • ON":"ê³ ì • OFF"); }, 520);
        }, {passive:true});
        c.addEventListener("touchend",()=>{ clearTimeout(pressT); pressT=null; }, {passive:true});

        // í´ë¦­=ë‹´ê¸°
        c.onclick=()=> addToCart(it.id);

        grid.appendChild(c);
      }
    }

    /***************
     * ì¥ë°”êµ¬ë‹ˆ ë Œë” (ìµœì†Œ 7ì¤„)
     ***************/
    function changeQty(id, delta){
      id=String(id);
      const r=cart.find(x=>String(x.id)===id);
      if (!r) return;
      r.qty = (r.qty|0) + delta;
      if (r.qty <= 0) cart = cart.filter(x=>String(x.id)!==id);
      saveCart();
      renderCart();
    }
    function delItem(id){
      id=String(id);
      cart = cart.filter(x=>String(x.id)!==id);
      saveCart();
      renderCart();
    }

    function renderCart(){
      const box=$("cartList");
      box.innerHTML="";

      const rows = cart.map(r=>{
        const it=itemById(r.id);
        if (!it) return null;
        return {it, qty:r.qty|0};
      }).filter(Boolean);

      // ìµœì†Œ 7ì¤„ ë³´ì´ê²Œ: ë¹„ì–´ìˆìœ¼ë©´ ì¤„ë§Œ ì±„ì›€
      const minRows = 7;
      const totalRows = Math.max(minRows, rows.length);

      for (let i=0;i<totalRows;i++){
        if (i >= rows.length){
          const ghost=document.createElement("div");
          ghost.className="row";
          ghost.style.opacity="0.25";
          ghost.innerHTML = `<div class="title">â€”</div><div></div><div></div><div></div>`;
          box.appendChild(ghost);
          continue;
        }

        const {it, qty} = rows[i];
        const row=document.createElement("div");
        row.className="row";

        const left=document.createElement("div");
        left.innerHTML = `<div class="title">${it.unit ? `${it.name} x${qty}` : `${it.name} x${qty}`}</div>
                          <div class="sub">${money((it.price|0)*qty)} Â· ë‹¨ê°€ ${money(it.price|0)}</div>`;

        const qtyCtl=document.createElement("div");
        qtyCtl.className="qtyCtl";
        const minus=document.createElement("button"); minus.textContent="â€“";
        const num=document.createElement("div"); num.className="qtyNum"; num.textContent=qty;
        const plus=document.createElement("button"); plus.textContent="+";
        minus.onclick=()=>changeQty(it.id,-1);
        plus.onclick=()=>changeQty(it.id,+1);
        qtyCtl.appendChild(minus); qtyCtl.appendChild(num); qtyCtl.appendChild(plus);

        const del=document.createElement("button");
        del.className="del";
        del.textContent="ì‚­ì œ";
        del.onclick=()=>delItem(it.id);

        const dummy=document.createElement("div"); // align grid columns
        dummy.style.display="none";

        row.appendChild(left);
        row.appendChild(qtyCtl);
        row.appendChild(del);
        row.appendChild(dummy);
        box.appendChild(row);
      }

      const total = cartTotal();
      $("total").textContent = money(total);
      $("count").textContent = cartCount();

      // ë°›ì€ëˆ/ê±°ìŠ¤ë¦„ëˆ
      const paid = parseInt(($("paidInput").value||"0").replace(/[^\d]/g,""),10) || 0;
      $("paidView").textContent = money(paid);
      $("changeView").textContent = money(Math.max(0, paid - total));
    }

    /***************
     * ê²°ì œ/ë²„íŠ¼/ì‚¬ìš´ë“œ
     ***************/
    function beep(){
      try{
        const ctx = new (window.AudioContext||window.webkitAudioContext)();
        const o = ctx.createOscillator();
        const g = ctx.createGain();
        o.type="sine";
        o.frequency.value=880;
        g.gain.value=0.08;
        o.connect(g); g.connect(ctx.destination);
        o.start();
        setTimeout(()=>{ o.stop(); ctx.close(); }, 120);
      }catch(e){}
    }

    function resetPaidOnly(){
      $("paidInput").value="";
      renderCart();
    }

    $("payBtn").onclick=()=>{
      const total = cartTotal();
      if (total<=0){ toast("ë‹´ê¸´ ìƒí’ˆì´ ì—†ìŠµë‹ˆë‹¤"); return; }
      beep();
      cart = [];
      saveCart();
      resetPaidOnly();
      renderCart();
      toast("ê²°ì œì™„ë£Œ");
    };

    // ê±°ìŠ¤ë¦„ëˆ ë²„íŠ¼ë“¤
    document.querySelectorAll("[data-add]").forEach(btn=>{
      btn.onclick=()=>{
        const add = parseInt(btn.getAttribute("data-add"),10)||0;
        const cur = parseInt(($("paidInput").value||"0").replace(/[^\d]/g,""),10)||0;
        $("paidInput").value = String(cur + add);
        renderCart();
      };
    });
    document.querySelector("[data-reset]").onclick=()=> resetPaidOnly();

    // ì…ë ¥ ë³€í™” ë°˜ì˜
    $("paidInput").addEventListener("input", ()=>{
      $("paidInput").value = ($("paidInput").value||"").replace(/[^\d]/g,"");
      renderCart();
    });

    // ê²€ìƒ‰/ì´ˆì„±í‚¤
    $("q").addEventListener("input", ()=>{
      q = $("q").value;
      renderProducts();
    });

    const choKeys = ["ã„±","ã„´","ã„·","ã„¹","ã…","ã…‚","ã……","ã…‡","ã…ˆ","ã…Š","ã…‹","ã…Œ","ã…","ã…","X"];
    const choEl = $("cho");
    choEl.innerHTML="";
    choKeys.forEach(k=>{
      const b=document.createElement("button");
      b.textContent=k;
      b.onclick=()=>{
        if (k==="X"){ $("q").value=""; q=""; }
        else { $("q").value = ($("q").value||"") + k; q=$("q").value; }
        renderProducts();
        $("q").focus();
      };
      choEl.appendChild(b);
    });

    /***************
     * ë°ì´í„° ë¡œë“œ ì´ë²¤íŠ¸
     ***************/
    function setItems(newItems){
      ITEMS = Array.isArray(newItems) ? newItems : [];
      // í˜¹ì‹œ ì¹´í…Œê³ ë¦¬ëª…ì´ ë‹¤ë¥´ê²Œ ë“¤ì–´ì˜¤ë©´ ê°•ì œë¡œ 5ê°œ ì¤‘ í•˜ë‚˜ë¡œ ì •ë¦¬
      ITEMS.forEach(it=>{
        if (!CATS.includes(it.cat)) it.cat = "ê¸°íƒ€";
      });
      renderTabs();
      renderProducts();
      renderCart();
    }

    // items.jsê°€ ë¡œë“œ ì™„ë£Œ ì‹œ ì´ë²¤íŠ¸ë¥¼ ì¨
    window.addEventListener("items:loaded", (e)=> setItems(e.detail||[]));

    // items.jsê°€ ì‹¤íŒ¨í•´ë„ ìƒ˜í”Œë¡œë¼ë„ ë³´ì´ê²Œ
    window.addEventListener("items:failed", ()=>{
      const sample = [
        {id:"S1", cat:"ê³¼ì¼", name:"ì‚¬ê³¼", unit:"", price:3000, active:1},
        {id:"S2", cat:"ê³¼ì¼", name:"ë°”ë‚˜ë‚˜", unit:"", price:2500, active:1},
        {id:"S3", cat:"ì•¼ì±„", name:"ê°ì", unit:"", price:3000, active:1},
        {id:"S4", cat:"ì•¼ì±„", name:"ì–‘íŒŒ", unit:"", price:2500, active:1},
        {id:"S5", cat:"ë´‰ì±„ì†Œ", name:"ê¹»ì", unit:"", price:2000, active:1},
        {id:"S6", cat:"ìƒì„ ", name:"ê³ ë“±ì–´", unit:"", price:6000, active:1},
        {id:"S7", cat:"ê¸°íƒ€", name:"ë¶€ì¶”", unit:"", price:2000, active:1},
      ];
      toast("ìƒí’ˆ ë°ì´í„° ë¡œë“œ ì‹¤íŒ¨(ìƒ˜í”Œ í‘œì‹œ). ì‹œíŠ¸ ê³µê°œ/CSV í™•ì¸!");
      setItems(sample);
    });

    // ìµœì´ˆ ë Œë”
    renderTabs();
    renderCart();
  </script>
</body>
</html>
